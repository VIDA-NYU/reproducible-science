language: python
python: "3.5"
# command to install dependencies
install: pip install 'Nikola[extras]' requests PyYAML
# command to run tests
script:
  - mkdir -p posts/directory && rm -f posts/directory/*
  - ./import_rss.py
  - nikola build
after_success: |
  [ $TRAVIS_BRANCH = master ] &&
  [ $TRAVIS_PULL_REQUEST = false ] &&
  virtualenv -p python2.7 /tmp/venv &&
  . /tmp/venv/bin/activate &&
  pip install ghp-import &&
  ghp-import -n output &&
  git push -qf https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG}.git gh-pages
